// http://cdn.shopify.com/s/shopify/api.jquery.js?23cf0cb43029f21b248d85faa3c7772fb6f7ed25

function floatToString(e,t){var n=e.toFixed(t).toString();if(n.match(/^\.\d+/)){return"0"+n}else{return n}}function attributeToString(e){if(typeof e!=="string"){e+="";if(e==="undefined"){e=""}}return jQuery.trim(e)}if(typeof Shopify==="undefined"){Shopify={}}Shopify.money_format="$ {{amount}}";Shopify.onError=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");if(!!data.message){alert(data.message+"("+data.status+"): "+data.description)}else{alert("Error : "+Shopify.fullMessagesFromErrors(data).join("; ")+".")}};Shopify.fullMessagesFromErrors=function(e){var t=[];jQuery.each(e,function(e,n){jQuery.each(n,function(n,r){t.push(e+" "+r)})});return t};Shopify.onCartUpdate=function(e){alert("There are now "+e.item_count+" items in the cart.")};Shopify.onCartShippingRatesUpdate=function(e,t){var n="";if(t.zip)n+=t.zip+", ";if(t.province)n+=t.province+", ";n+=t.country;alert("There are "+e.length+" shipping rates available for "+n+", starting at "+Shopify.formatMoney(e[0].price)+".")};Shopify.onItemAdded=function(e){alert(e.title+" was added to your shopping cart.")};Shopify.onProduct=function(e){alert("Received everything we ever wanted to know about "+e.title)};Shopify.formatMoney=function(e,t){function s(e){return e.replace(/(\d+)(\d{3}[\.,]?)/,"$1,$2")}if(typeof e=="string")e=e.replace(".","");var n="";var r=/\{\{\s*(\w+)\s*\}\}/;var i=t||this.money_format;switch(i.match(r)[1]){case"amount":n=s(floatToString(e/100,2));break;case"amount_no_decimals":n=s(floatToString(e/100,0));break;case"amount_with_comma_separator":n=floatToString(e/100,2).replace(/\./,",");break;case"amount_no_decimals_with_comma_separator":n=s(floatToString(e/100,0)).replace(/\./,",");break}return i.replace(r,n)};Shopify.resizeImage=function(e,t){try{if(t=="original"){return e}else{var n=e.match(/(.*\/[\w\-\_\.]+)\.(\w{2,4})/);return n[1]+"_"+t+"."+n[2]}}catch(r){return e}};Shopify.addItem=function(e,t,n){t=t||1;var r={type:"POST",url:"/cart/add.js",data:"quantity="+t+"&id="+e,dataType:"json",success:function(e){if(typeof n==="function"){n(e)}else{Shopify.onItemAdded(e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(r)};Shopify.addItemFromForm=function(e,t){var n={type:"POST",url:"/cart/add.js",data:jQuery("#"+e).serialize(),dataType:"json",success:function(e){if(typeof t==="function"){t(e)}else{Shopify.onItemAdded(e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(n)};Shopify.getCart=function(e){jQuery.getJSON("/cart.js",function(t,n){if(typeof e==="function"){e(t)}else{Shopify.onCartUpdate(t)}})};Shopify.getCartShippingRatesForDestination=function(e,t){var n={type:"GET",url:"/cart/shipping_rates.json",data:Shopify.param({shipping_address:e}),dataType:"json",success:function(n){rates=n.shipping_rates;if(typeof t==="function"){t(rates,e)}else{Shopify.onCartShippingRatesUpdate(rates,e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(n)};Shopify.getProduct=function(e,t){jQuery.getJSON("/products/"+e+".js",function(e,n){if(typeof t==="function"){t(e)}else{Shopify.onProduct(e)}})};Shopify.changeItem=function(e,t,n){var r={type:"POST",url:"/cart/change.js",data:"quantity="+t+"&id="+e,dataType:"json",success:function(e){if(typeof n==="function"){n(e)}else{Shopify.onCartUpdate(e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(r)};Shopify.removeItem=function(e,t){var n={type:"POST",url:"/cart/change.js",data:"quantity=0&id="+e,dataType:"json",success:function(e){if(typeof t==="function"){t(e)}else{Shopify.onCartUpdate(e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(n)};Shopify.clear=function(e){var t={type:"POST",url:"/cart/clear.js",data:"",dataType:"json",success:function(t){if(typeof e==="function"){e(t)}else{Shopify.onCartUpdate(t)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(t)};Shopify.updateCartFromForm=function(e,t){var n={type:"POST",url:"/cart/update.js",data:jQuery("#"+e).serialize(),dataType:"json",success:function(e){if(typeof t==="function"){t(e)}else{Shopify.onCartUpdate(e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(n)};Shopify.updateCartAttributes=function(e,t){var n="";if(jQuery.isArray(e)){jQuery.each(e,function(e,t){var r=attributeToString(t.key);if(r!==""){n+="attributes["+r+"]="+attributeToString(t.value)+"&"}})}else if(typeof e==="object"&&e!==null){jQuery.each(e,function(e,t){n+="attributes["+attributeToString(e)+"]="+attributeToString(t)+"&"})}var r={type:"POST",url:"/cart/update.js",data:n,dataType:"json",success:function(e){if(typeof t==="function"){t(e)}else{Shopify.onCartUpdate(e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(r)};Shopify.updateCartNote=function(e,t){var n={type:"POST",url:"/cart/update.js",data:"note="+attributeToString(e),dataType:"json",success:function(e){if(typeof t==="function"){t(e)}else{Shopify.onCartUpdate(e)}},error:function(e,t){Shopify.onError(e,t)}};jQuery.ajax(n)};if(jQuery.fn.jquery>="1.4"){Shopify.param=jQuery.param}else{Shopify.param=function(e){var t=[],n=function(e,n){n=jQuery.isFunction(n)?n():n;t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)};if(jQuery.isArray(e)||e.jquery){jQuery.each(e,function(){n(this.name,this.value)})}else{for(var r in e){Shopify.buildParams(r,e[r],n)}}return t.join("&").replace(/%20/g,"+")};Shopify.buildParams=function(e,t,n){if(jQuery.isArray(t)&&t.length){jQuery.each(t,function(t,r){if(rbracket.test(e)){n(e,r)}else{Shopify.buildParams(e+"["+(typeof r==="object"||jQuery.isArray(r)?t:"")+"]",r,n)}})}else if(t!==null&&typeof t==="object"){if(Shopify.isEmptyObject(t)){n(e,"")}else{jQuery.each(t,function(t,r){Shopify.buildParams(e+"["+t+"]",r,n)})}}else{n(e,t)}};Shopify.isEmptyObject=function(e){for(var t in e){return false}return true}}
